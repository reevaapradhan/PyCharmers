<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Farmer Page</title>
  <script src="https://cdn.jsdelivr.net/npm/qrcodejs/qrcode.min.js"></script>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    form { margin-bottom: 20px; }
    #qrcode { margin-top: 20px; }
  </style>
</head>
<body>
  <h1>Farmer Portal</h1>
  <form id="farmerForm">
    <label>Crop Name: <input type="text" id="crop"></label><br><br>
    <label>Quantity: <input type="number" id="quantity"></label><br><br>
    <label>Harvest Date: <input type="date" id="harvest"></label><br><br>
    <button type="submit">Submit</button>
  </form>

  <div id="result"></div>
  <div id="qrcode"></div>

  <script>
    let batchDB = {}; // fake backend in memory

    document.getElementById("farmerForm").addEventListener("submit", function(e){
      e.preventDefault();
      let crop = document.getElementById("crop").value;
      let qty = document.getElementById("quantity").value;
      let date = document.getElementById("harvest").value;

      // Generate Batch ID
      let batchId = "BATCH" + Date.now();
      batchDB[batchId] = { crop, qty, date, status: "Created" };

      document.getElementById("result").innerHTML =
        `<p>Batch Created: <b>${batchId}</b></p>`;

      // Generate QR
      document.getElementById("qrcode").innerHTML = "";
      new QRCode(document.getElementById("qrcode"), batchId);

      console.log("DB:", batchDB); // see data in console
    });
  </script>
</body>
</html>
